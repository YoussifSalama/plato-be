model Account{
    id Int @id @default(autoincrement())

    email String @unique
    f_name String
    l_name String
    user_name String

    verified Boolean @default(false)

    agency_id Int? @unique
    agency Agency? @relation(fields: [agency_id], references: [id], onDelete: SetNull)

    credential_id Int @unique
    credential Credential @relation(fields: [credential_id], references: [id], onDelete: Cascade)
    
    tokens Token[]
    otps Otp[]
    verify_account_tokens VerifyAccountToken[]
    

    created_at DateTime @default(now())
    updated_at DateTime @updatedAt
}

model Agency{
    id Int @id @default(autoincrement())
    company_name String?
    organization_url String?
    company_size String?
    company_industry String?
    company_description String?

    account Account?
    teams Team[]
    jobs Job[]
    invitations Invitation[]
    inboxes Inbox[]
    interview_resources InterviewResources[]

    created_at DateTime @default(now())
    updated_at DateTime @updatedAt
}

model Credential{
    id Int @id @default(autoincrement())
    password_hash String

    account Account?

    created_at DateTime @default(now())
    updated_at DateTime @updatedAt
}


model Team{
    id Int @id @default(autoincrement())
    email String @unique
    phone String? @unique
    name String?

    agency_id Int
    agency Agency @relation(fields: [agency_id], references: [id], onDelete: Cascade)

    created_at DateTime @default(now())
    updated_at DateTime @updatedAt
}

model Token{
    id Int @id @default(autoincrement())
    refresh_token String

    account_id Int
    account Account @relation(fields: [account_id], references: [id], onDelete: Cascade)

    created_at DateTime @default(now())
    updated_at DateTime @updatedAt
}

model Otp{
    id Int @id @default(autoincrement())
    code String
    purpose OtpPurpose
    expires_at DateTime
    used_at DateTime?

    account_id Int
    account Account @relation(fields: [account_id], references: [id], onDelete: Cascade)

    created_at DateTime @default(now())
    updated_at DateTime @updatedAt
}

model VerifyAccountToken{
    id Int @id @default(autoincrement())
    token String @unique
    expires_at DateTime
    used_at DateTime?

    account_id Int
    account Account @relation(fields: [account_id], references: [id], onDelete: Cascade)

    created_at DateTime @default(now())
    updated_at DateTime @updatedAt
}