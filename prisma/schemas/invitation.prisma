model Invitation {
    id Int @id @default(autoincrement())

    to_id Int    @unique
    to    Resume @relation(fields: [to_id], references: [id])

    from_id Int
    from    Agency @relation(fields: [from_id], references: [id])

    job_id Int
    job    Job @relation(fields: [job_id], references: [id], onDelete: Cascade)

    candidate Candidate?
    tokens    InvitationToken[]

    updated_by Int?
    updater    Account? @relation("InvitationUpdater", fields: [updated_by], references: [id])

    created_at DateTime @default(now())
    updated_at DateTime @updatedAt
}

model InvitationToken {
    id         Int                   @id @default(autoincrement())
    token      String
    expires_at DateTime
    revoked    Boolean               @default(false)
    status     InvitationTokenStatus @default(valid)

    invitation_id Int
    invitation    Invitation @relation(fields: [invitation_id], references: [id])

    candidate_id       Int?
    candidate          Candidate?          @relation(fields: [candidate_id], references: [id], onDelete: SetNull)
    interview_resource InterviewResources?
    interview_session  InterviewSession?

    created_at DateTime @default(now())
    updated_at DateTime @updatedAt
}
